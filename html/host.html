<html>
  <head>
    <meta charset="utf-8"/>
    <link href="/assets/stylesheets/main.css" rel="stylesheet">
    <link href="/assets/stylesheets/host.css" rel="stylesheet">

    <!-- (NEW): TODO [WILL REFACTOR LATER] -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
          const capacityDisplayText = document.getElementById("capacity-display-text");
          const capacitySlider = document.getElementById("capacity-slider");

          capacitySlider.onchange = (e) => {
            capacityDisplayText.innerHTML = `Session Capacity: ${e.target.value}`;
          };

          const sessionClosedChatBox = document.getElementById("session-chat-box-closed");
          const sessionClosedChatBoxBottom = document.getElementById("session-chat-box-closed-bottom");
          const sessionOpenChatBox = document.getElementById("session-chat-box-open");
          const sessionOpenChatHeader = document.getElementById("session-open-chat-header");

          sessionClosedChatBox.onclick = () => {
            sessionOpenChatBox.classList.remove("invisible");
            sessionClosedChatBox.classList.add("invisible");
            sessionClosedChatBoxBottom.classList.add("invisible");
          };

          sessionOpenChatHeader.onclick = () => {
            sessionOpenChatBox.classList.add("invisible");
            sessionClosedChatBox.classList.remove("invisible");
            sessionClosedChatBoxBottom.classList.remove("invisible");
          };

          const globalClosedChatBox = document.getElementById("global-chat-box-closed");
          const globalClosedChatBoxBottom = document.getElementById("global-chat-box-closed-bottom");
          const globalOpenChatBox = document.getElementById("global-chat-box-open");
          const globalOpenChatHeader = document.getElementById("global-open-chat-header");

          globalClosedChatBox.onclick = () => {
            globalOpenChatBox.classList.remove("invisible");
            globalClosedChatBox.classList.add("invisible");
            globalClosedChatBoxBottom.classList.add("invisible");
          };

          globalOpenChatHeader.onclick = () => {
            globalOpenChatBox.classList.add("invisible");
            globalClosedChatBox.classList.remove("invisible");
            globalClosedChatBoxBottom.classList.remove("invisible");
          };

          const commandCenterClosedBox = document.getElementById("command-center-closed");
          const commandCenterOpenBox = document.getElementById("command-center-open");
          const commandCenterOpenHeader = document.getElementById("command-center-header");

          commandCenterClosedBox.onclick = () => {
            commandCenterOpenBox.classList.remove("invisible");
            commandCenterClosedBox.classList.add("invisible");
          };

          commandCenterOpenHeader.onclick = () => {
            commandCenterOpenBox.classList.add("invisible");
            commandCenterClosedBox.classList.remove("invisible");
          };
        });
    </script>
  </head>
  <body>

    <div id="modal-container" class="modal-container hidden">

      <div id="full-description-modal" class="modal flex-column">
        <div id="close-modal-button" class="close-modal-button"></div>
        <div class="modal-text">
          <p class="modal-activity-title">Disease</p>
          <p id="activity-text-full" class="activity-text-full">
            This is placeholder text for a full activity description.
          </p>
        </div>
      </div>

    </div>

    <div id="form-frame" class="frame hidden">
      <h1 class="host-header">Hosting</h1>
      <form id="launch-form" action="javascript:void(0);" method="POST" enctype="multipart/form-data">

        <div class="activity-selection">

          <div class="activity-description">

            <div class="library-model-container" class="library-model-container">
              <select class="library-model" id="library-model" name="libraryModel" type="chooser">
                <option>[5] Example</option>
                <option>[5] Template</option>
                <option>[4] Client Perspective Example</option>
                <option selected>[4] Disease</option>
                <option>[4] Function</option>
                <option>[4] Investments</option>
                <option>[4] Predator Prey Game</option>
                <option>[4] Root Beer Game</option>
                <option>[3] Bug Hunters Camouflage</option>
                <option>[3] Disease With Android Avoidance</option>
                <option>[3] Minority Game</option>
                <option>[3] Tragedy of the Commons</option>
                <option>[3] Walking</option>
                <option>[2] Disease Doctors</option>
                <option>[2] Memory</option>
                <option>[2] Oil Cartel Alternate</option>
                <option>[2] Public Good</option>
                <option>[1] BeeSmart</option>
                <option>[1] Bug Hunters Adaptations</option>
                <option>[1] Bug Hunters Competition</option>
                <option>[1] Dice Stalagmite</option>
                <option>[1] Fish Spotters</option>
                <option>[1] Gridlock</option>
                <option>[1] Guppy Spots</option>
                <option>[1] PANDA BEAR</option>
                <option>[1] Polling</option>
                <option>[1] Polling Advanced</option>
                <option>[1] Prisoners Dilemma</option>

                <option>[a] Oil Cartel</option> <!-- requires narrowcast plots -->

                <option>[0] Restaurants</option> <!-- makes no distinction between AI restaurants and player-owned ones -->

                <option>[0] Bird Breeders</option> <!-- requires spectator clients -->
                <option>[0] Gridlock Alternate</option> <!-- requires spectator clients -->

                <option>[0] Client Overrides Example</option> <!-- requires view overrides -->
                <option>[0] Critter Designers</option> <!-- requires view overrides -->
                <option>[0] Current in a Wire</option> <!-- requires view overrides -->
                <option>[0] MTG 1 Equal Opportunities</option> <!-- requires view overrides -->
                <option>[0] MTG 2 Random Assignment</option> <!-- requires view overrides -->
                <option>[0] MTG 3 Feedback Loop</option> <!-- requires view overrides -->
                <option>[0] Sampler</option> <!-- requires view overrides -->
              </select>

              <div class="custom-select-arrow">
                <div class="triangle-down"></div>
              </div>

            </div>

            <p id="activity-text-short" class="activity-text-short">
              This is a placeholder for a condensed activity description.
            </p>
            <input type="button" id="read-more-button" class="read-more-button" value="Read More">
          </div>

          <div class="image-wrapper">
            <img
              id="preview-image"
              class="preview-image"
              src=" http://ccl.northwestern.edu/netlogo/models/models/Curricular%20Models/epiDEM/epiDEM%20Basic.png"
              alt="Activity Image"
            >
          </div>
        </div>

        <div class="form-input-wrapper">
          <div>
            <label class="form-label">Session Name
              <input class="form-input" name="sessionName" type="text" pattern="\w.*" required>
            </label>
          </div>
          <div class="center-input">
            <label class="form-label">Password
              <input class="form-input" name="password" type="text">
            </label>
          </div>
          <input class="button-general launch-button" type="submit" value="Launch">
        </div>

      </form>

    </div>

    <div id="id-display"></div>

    <!-- HostB page here -->
    <div id="nlw-frame" class="frame">

      <div id="hnw-general-header" class="hnw-general-header hnw-host-header flex-row">
        <div class="hnw-header-text">HubNet Web</div>
        <div class="page-links-dropdown">
          <div class="dropdown-label">
            <div>View Options</div>
            <div class="triangle-down"></div>
          </div>
          <div class="page-links-tabs">
            <a href="/" class="page-links">Stats</a>
            <a href="/" class="page-links">Code</a>
            <a href="/" class="page-links">Model Info</a>
          </div>
        </div>
      </div>

      <div class="top-setup-row flex-row">
        <input class="button-base copy-invite-button" id="copy-invite-button" type="button" value="Copy Invite Link">
        <div class="capacity-slider-container">
          <p id="capacity-display-text" class="capacity-display-text">Session Capacity: 50</p>
          <input id="capacity-slider" class="capacity-slider" type="range" min="0" max="100" value="50">
        </div>
      </div>


      <div style="display: flex; flex-direction: row;">

        <!-- <div id="session-dashboard">
          <div>Upload: <span id="bandwidth-span">0 B</span>/s</div>
          <div>New Send: <span id="new-send-span">0 B</span>/s</div>
          <div style="display: flex; flex-direction: row;">
            <div># Clients: <span id="num-clients-span">0</span></div>
            <div style="margin: 0 10px;">|</div>
            <label>Max # Clients:
              <input id="max-num-clients-picker" type="number"
                     min="0" max="999" step="1" value="50"
                     oninput="this.value = Math.max(0, Math.min(999, parseInt(this.value)))" />
            </label>
          </div>
          <div># TURNs: <span id="num-turn-span">0</span></div>
          <div># Congested: <span id="num-congested-span">0</span></div>
          <div>Status: <span id="activity-status-span">...</span></div>
        </div> -->

        <!-- <div class="chat-wrapper">
          <div id="global-chat-container" class="chat-container">
            <div id="global-chat-output" class="chat-output"></div>
            <input id="global-chat-input" class="chat-input" type="text" value=""
                   placeholder="Send a message" />
          </div>
          <div id="session-chat-container" class="chat-container">
            <div id="session-chat-output" class="chat-output"></div>
            <input id="session-chat-input" class="chat-input" type="text" value=""
                   placeholder="Send a message" />
          </div>
        </div> -->

      </div>

      <iframe class="nlw-iframe"></iframe>

      <div class="bottom-setup-row flex-row">
        <input class="button-base setup-button" id="setup-button" type="button" value="Setup">
        <input class="button-base go-button" id="go-button" type="button" value="Go">
      </div>

      <div id="command-center-container">
        <div id="command-center-closed" class="command-center-closed flex-row">
          <div class="popup-header-text">Command Center</div>
          <div class="triangle-up-black"></div>
        </div>

        <div id="command-center-open" class="command-center-open flex-column invisible">
          <div id="command-center-header" class="command-center-header flex-row">
            <div class="popup-header-text">Command Center</div>
            <div class="triangle-down-black"></div>
          </div>
          <div class="command-center-body"></div>
        </div>
      </div>

      <div class="chat-wrapper">

        <div id="session-chat-container">
          <div id="session-chat-box-closed-container" class="session-chat-box-closed-container">
            <div id="session-chat-box-closed" class="session-chat-box-closed flex-display">
              Session Chat
            </div>
            <div id="session-chat-box-closed-bottom" class="session-chat-box-closed-bottom"></div>
          </div>
          <div id="session-chat-box-open" class="session-chat-box-open invisible">
            <div id="session-open-chat-header" class="session-open-chat-header flex-display">
              <div class="popup-header-text">Session Chat</div>
              <div class="triangle-down-black"></div>
            </div>

            <div id="session-chat">
              <div id="session-chat-output" class="session-open-chat-body"></div>
              <input
                id="session-chat-input"
                class="session-open-chat-input"
                type="text"
                value=""
                placeholder="Send a message"
              />
            </div>
          </div>
        </div>

        <div id="global-chat-container">
          <div id="global-chat-box-closed-container" class="global-chat-box-closed-container">
            <div id="global-chat-box-closed" class="global-chat-box-closed flex-display">
              Global Chat
            </div>
            <div id="global-chat-box-closed-bottom" class="global-chat-box-closed-bottom"></div>
          </div>
          <div id="global-chat-box-open" class="global-chat-box-open invisible">
            <div id="global-open-chat-header" class="global-open-chat-header flex-display">
              <div class="popup-header-text">Global Chat</div>
              <div class="triangle-down-black"></div>
            </div>

            <div id="global-chat">
              <div id="global-chat-output" class="global-open-chat-body"></div>
              <input
                id="global-chat-input"
                class="global-open-chat-input"
                type="text"
                value=""
                placeholder="Send a message"
              />
            </div>
          </div>
        </div>




      </div>


    </div>

    <script src="/js/browser-compat-abort.js"></script>
    <script src="/js/host/main.js" type="module"></script>

  </body>
</html>
